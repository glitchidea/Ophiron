{% load i18n %}
<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% trans "Image Details" %} - Ophiron</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="{% load static %}{% static 'css/main.css' %}">
    
    <!-- Header CSS -->
    <link rel="stylesheet" href="{% load static %}{% static 'css/components/header.css' %}">
    
    <!-- Docker Manager CSS -->
    <link rel="stylesheet" href="{% load static %}{% static 'css/docker_manager/main.css' %}">
    <link rel="stylesheet" href="{% load static %}{% static 'css/docker_manager/image_detail.css' %}">
    
</head>
<body>
    <div class="dashboard-container">
        <!-- Header Component -->
        {% include 'components/header.html' %}
        
        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="docker-manager">
                <!-- Header -->
                <div class="docker-header">
                    <div class="header-left">
                        <button class="nav-btn" onclick="window.location.href='{% url 'docker_manager:images' %}'">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h1 class="docker-title">{% trans "Image Details" %}</h1>
                    </div>
                </div>


                <!-- Image Info Header -->
                <div class="image-info-header">
                    <div class="image-info-left">
                        <div class="image-icon">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="image-details">
                            <h2 class="image-name">{{ image.name }}</h2>
                            <div class="image-meta">
                                <span class="image-tag">{{ image.tag }}</span>
                                <span class="image-id">{{ image.id }}</span>
                                <span class="copy-icon" onclick="copyToClipboard('{{ image.id }}')">ðŸ“‹</span>
                            </div>
                        </div>
                    </div>
                    <div class="image-actions">
                        <button class="action-btn run" onclick="runImage('{{ image.id }}')">
                            <i class="fas fa-play"></i>
                            {% trans "Run" %}
                        </button>
                        <button class="action-btn delete" onclick="deleteImage('{{ image.id }}')">
                            <i class="fas fa-trash"></i>
                            {% trans "Delete" %}
                        </button>
                    </div>
                </div>

                <!-- Image Tabs -->
                <div class="image-tabs">
                    <div class="nav-tabs">
                        <button class="nav-tab active" data-tab="overview">
                            <i class="fas fa-info-circle"></i>
                            {% trans "Overview" %}
                        </button>
                        <button class="nav-tab" data-tab="layers">
                            <i class="fas fa-layer-group"></i>
                            {% trans "Layers" %}
                        </button>
                        <button class="nav-tab" data-tab="history">
                            <i class="fas fa-history"></i>
                            {% trans "History" %}
                        </button>
                        <button class="nav-tab" data-tab="logs">
                            <i class="fas fa-file-alt"></i>
                            {% trans "Logs" %}
                        </button>
                        <button class="nav-tab" data-tab="inspect">
                            <i class="fas fa-search"></i>
                            {% trans "Inspect" %}
                        </button>
                    </div>
                </div>

                <!-- Tab Content -->
                <div class="tab-content-container">
                    <!-- Overview Tab -->
                    <div class="tab-content active" id="overview-content">
                        <div class="overview-grid">
                            <div class="info-card">
                                <h3>{% trans "Basic Information" %}</h3>
                                <div class="info-item">
                                    <label>{% trans "Image ID" %}:</label>
                                    <span>{{ image.id }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Size" %}:</label>
                                    <span>{{ image.size }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Created" %}:</label>
                                    <span>{{ image.created }}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "Architecture" %}:</label>
                                    <span id="architecture">{% trans "Loading..." %}</span>
                                </div>
                                <div class="info-item">
                                    <label>{% trans "OS" %}:</label>
                                    <span id="os">{% trans "Loading..." %}</span>
                                </div>
                            </div>

                            <div class="info-card">
                                <h3>{% trans "Labels" %}</h3>
                                <div id="labelsList">
                                    <div class="loading">{% trans "Loading labels..." %}</div>
                                </div>
                            </div>

                            <div class="info-card">
                                <h3>{% trans "Environment Variables" %}</h3>
                                <div id="envVarsList">
                                    <div class="loading">{% trans "Loading environment variables..." %}</div>
                                </div>
                            </div>

                            <div class="info-card">
                                <h3>{% trans "Exposed Ports" %}</h3>
                                <div id="exposedPortsList">
                                    <div class="loading">{% trans "Loading exposed ports..." %}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Layers Tab -->
                    <div class="tab-content" id="layers-content">
                        <div class="layers-container">
                            <div class="layers-header">
                                <h3>{% trans "Image Layers" %}</h3>
                                <span class="layers-count" id="layersCount">{% trans "Loading..." %}</span>
                            </div>
                            <div id="layersList">
                                <div class="loading">{% trans "Loading layers..." %}</div>
                            </div>
                        </div>
                    </div>

                    <!-- History Tab -->
                    <div class="tab-content" id="history-content">
                        <div class="history-container">
                            <div class="history-header">
                                <h3>{% trans "Image History" %}</h3>
                            </div>
                            <div id="historyList">
                                <div class="loading">{% trans "Loading history..." %}</div>
                            </div>
                        </div>
                    </div>

                    <!-- Logs Tab -->
                    <div class="tab-content" id="logs-content">
                        <div class="logs-container">
                            <div class="logs-header">
                                <h3>{% trans "Image Logs" %}</h3>
                                <button class="refresh-btn" onclick="refreshImageLogs()">
                                    <i class="fas fa-refresh"></i>
                                    {% trans "Refresh" %}
                                </button>
                            </div>
                            <div class="logs-content">
                                <pre id="logsData">{% trans "Loading logs..." %}</pre>
                            </div>
                        </div>
                    </div>

                    <!-- Inspect Tab -->
                    <div class="tab-content" id="inspect-content">
                        <div class="inspect-container">
                            <div class="inspect-header">
                                <h3>{% trans "Image Inspect" %}</h3>
                                <button class="copy-btn" onclick="copyInspectData()">
                                    <i class="fas fa-copy"></i>
                                    {% trans "Copy JSON" %}
                                </button>
                            </div>
                            <div class="inspect-content">
                                <pre id="inspectData">{% trans "Loading inspect data..." %}</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- CSRF Token -->
    {% csrf_token %}

    <!-- JavaScript -->
    <script src="{% load static %}{% static 'js/docker_manager/main.js' %}"></script>
    <script src="{% load static %}{% static 'js/docker_manager/image_detail.js' %}"></script>
</body>
</html>
