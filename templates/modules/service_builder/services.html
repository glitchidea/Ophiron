{% extends 'core/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans 'Services' %} - {% trans 'Service Builder' %}{% endblock %}

{% block extra_css %}
    <!-- Service Builder CSS -->
    <link href="{% static 'css/service_builder/main.css' %}" rel="stylesheet">
    <link href="{% static 'css/service_builder/components/cards.css' %}" rel="stylesheet">
    <link href="{% static 'css/service_builder/components/tables.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="service-builder-container">
    <!-- Header Section -->
    <div class="service-builder-header">
        <div class="header-content">
            <div class="header-left">
                <h1 class="service-builder-title">
                    <i class="fas fa-list"></i>
                    {% trans "Services" %}
                </h1>
                <p class="service-builder-subtitle">
                    {% trans "Manage and monitor your Linux systemd services" %}
                </p>
            </div>
            <div class="header-actions">
                <a href="{% url 'service_builder:create_service' %}" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    {% trans "Create Service" %}
                </a>
                <a href="{% url 'service_builder:index' %}" class="btn btn-outline">
                    <i class="fas fa-arrow-left"></i>
                    {% trans "Back to Dashboard" %}
                </a>
            </div>
        </div>
    </div>

    <!-- Services Table -->
    <div class="service-builder-content">
        <div class="services-table-container">
            {% if services %}
                <div class="table-responsive">
                    <table class="services-table">
                        <thead>
                            <tr>
                                <th>{% trans "Service Name" %}</th>
                                <th>{% trans "Type" %}</th>
                                <th>{% trans "User" %}</th>
                                <th>{% trans "Status" %}</th>
                                <th>{% trans "Created" %}</th>
                                <th>{% trans "Actions" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for service in services %}
                            <tr>
                                <td>
                                    <div class="service-info">
                                        <h4 class="service-name">{{ service.name }}</h4>
                                        <p class="service-description">{{ service.description|truncatechars:50 }}</p>
                                    </div>
                                </td>
                                <td>
                                    <span class="service-type-badge service-type-{{ service.service_type }}">
                                        {{ service.service_type|title }}
                                    </span>
                                </td>
                                <td>{{ service.user }}</td>
                                <td>
                                        <span class="status-badge status-unknown" id="status-{{ service.name }}">
                                            <i class="fas fa-circle"></i>
                                            {% trans "Checking..." %}
                                        </span>
                                </td>
                                <td>{{ service.created_at|date:"M d, Y" }}</td>
                                <td>
                                    <div class="service-actions">
                                        <a href="{% url 'service_builder:service_detail' service.name %}" class="btn btn-sm btn-outline" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="{% url 'service_builder:edit_service' service.name %}" class="btn btn-sm btn-primary" title="Edit Service">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <button class="btn btn-sm btn-outline" onclick="controlService('{{ service.name }}', 'start')" title="Start">
                                            <i class="fas fa-play"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="controlService('{{ service.name }}', 'stop')" title="Stop">
                                            <i class="fas fa-stop"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="controlService('{{ service.name }}', 'restart')" title="Restart">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                        <button class="btn btn-sm btn-danger" onclick="deleteService('{{ service.name }}')" title="Delete Service">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="empty-state">
                    <i class="fas fa-server"></i>
                    <h3>{% trans "No Services Found" %}</h3>
                    <p>{% trans "You haven't created any services yet. Create your first service to get started." %}</p>
                    <a href="{% url 'service_builder:create_service' %}" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        {% trans "Create Your First Service" %}
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
    <!-- Service Builder JavaScript -->
    <script src="{% static 'js/service_builder/main.js' %}"></script>
    <script src="{% static 'js/service_builder/services.js' %}"></script>
{% endblock %}
