{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% trans "Application Logs" %} - Ophiron</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/system_logs/system_logs.css' %}">
    <link rel="stylesheet" href="{% static 'css/system_logs/own_logs.css' %}">
    <link rel="stylesheet" href="{% static 'css/system_logs/own_logs_analysis_modal.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JavaScript Translations -->
    <script>
        window.jsTranslations = {
            'Select File...': '{% trans "Select File..." %}',
            'Please select a file to download': '{% trans "Please select a file to download" %}',
            'No files available for this module': '{% trans "No files available for this module" %}',
            'Select a File': '{% trans "Select a File" %}',
            'Please select a log file to view.': '{% trans "Please select a log file to view." %}',
            'No content found.': '{% trans "No content found." %}',
            'lines • Page': '{% trans "lines • Page" %}',
            'Previous': '{% trans "Previous" %}',
            'Next': '{% trans "Next" %}',
            'No categories found.': '{% trans "No categories found." %}',
            'Error occurred while fetching application logs.': '{% trans "Error occurred while fetching application logs." %}',
            'Showing': '{% trans "Showing" %}',
            'log entries': '{% trans "log entries" %}',
            'entries': '{% trans "entries" %}',
            'Analyze': '{% trans "Analyze" %}',
            'Application Logs Analysis': '{% trans "Application Logs Analysis" %}',
            'Collecting and analyzing logs...': '{% trans "Collecting and analyzing logs..." %}',
            'Overview': '{% trans "Overview" %}',
            'Total Lines': '{% trans "Total Lines" %}',
            'Categories': '{% trans "Categories" %}',
            'Files': '{% trans "Files" %}',
            'Levels (Pie)': '{% trans "Levels (Pie)" %}',
            'By Category (Bar)': '{% trans "By Category (Bar)" %}',
            'Timeline (Last 24h)': '{% trans "Timeline (Last 24h)" %}',
            'Top Error Messages': '{% trans "Top Error Messages" %}',
            'Message': '{% trans "Message" %}',
            'Count': '{% trans "Count" %}',
            'Close': '{% trans "Close" %}',
            'Levels Summary': '{% trans "Levels Summary" %}',
            'By Category Summary': '{% trans "By Category Summary" %}',
            'Level': '{% trans "Level" %}',
            'Category': '{% trans "Category" %}',
            'Error': '{% trans "Error" %}',
            'Warning': '{% trans "Warning" %}',
            'Info': '{% trans "Info" %}',
            'Debug': '{% trans "Debug" %}',
            'Other': '{% trans "Other" %}',
            'Lines': '{% trans "Lines" %}',
            'No errors found': '{% trans "No errors found" %}'
        };
    </script>
    <!-- Header and Navigation Scripts -->
    <script defer src="{% static 'js/components/header.js' %}"></script>
    <script defer src="{% static 'js/system_logs/own_logs.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script defer src="{% static 'js/system_logs/own_logs_analysis_modal.js' %}"></script>
</head>
<body>
    <div class="dashboard-container">
        {% include 'components/header.html' %}

        <main class="dashboard-main">
            <section class="logs-shell">
                <header class="logs-head">
                    <div class="logs-titles">
                        <h1 class="logs-title"><i class="fas fa-clipboard-list"></i> {% trans "Application Logs" %}</h1>
                        <p class="logs-subtitle">{% trans "Daily logs generated by the app" %}</p>
                    </div>
                    <div class="logs-actions">
                        <a href="{% url 'system_logs:page' %}" class="btn-secondary"><i class="fas fa-arrow-left"></i> {% trans "Back" %}</a>
                        <button id="openOwnLogsAnalysis" class="btn-secondary"><i class="fas fa-chart-pie"></i> {% trans "Analyze" %}</button>
                    </div>
                </header>

                <section class="logs-panel" style="height: 620px;">
                    <div class="own-compact">
                        <div class="own-compact-toolbar">
                            <div class="own-toolbar-left">
                                <div class="own-toolbar-group">
                                    <label class="own-label">{% trans "Module" %}</label>
                                    <select id="ownCategory" class="pill-select">
                                        <option value="">{% trans "Select Module..." %}</option>
                                    </select>
                                </div>
                                <div class="own-toolbar-group">
                                    <label class="own-label">{% trans "File" %}</label>
                                    <select id="ownFiles" class="pill-select">
                                        <option value="">{% trans "Select File..." %}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="own-toolbar-right">
                                <button id="ownTodayBtn" class="btn-secondary" title="{% trans 'Go to latest logs' %}">
                                    <i class="fas fa-calendar-day"></i> {% trans "Latest" %}
                                </button>
                                <button id="ownAllDownloadBtn" class="btn-secondary" title="{% trans 'Download all logs in category' %}">
                                    <i class="fas fa-download"></i> {% trans "Download" %}
                                </button>
                            </div>
                        </div>
                        <div class="own-log-card">
                            <div class="log-card-header">
                                <div class="log-card-title">
                                    <i class="fas fa-file-alt"></i>
                                    <span id="logCardTitle">{% trans "Application Logs" %}</span>
                                </div>
                                <div class="log-card-stats">
                                    <span id="logStats" class="log-stats">{% trans "Ready" %}</span>
                                </div>
                            </div>
                            <div id="ownContainer" class="logs-container enhanced-logs" aria-live="polite">
                                <div class="empty-state">
                                    <i class="fas fa-file-alt"></i>
                                    <h3>{% trans "Select a Module" %}</h3>
                                    <p>{% trans "Choose a module from the dropdown to view its logs" %}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <footer class="logs-foot">
                        <span class="logs-meta">{% trans "Select a module to view logs" %}</span>
                    </footer>
                </section>
            </section>
        </main>
    </div>
    {% include 'modules/system_logs/partials/own_logs_analysis_modal.html' %}
</body>
</html>


