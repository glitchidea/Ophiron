{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% trans "firewalld Firewall Management" %} - Ophiron</title>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Bootstrap CSS for modals -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Base styles to match dashboard -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/components/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/dashboard/style.css' %}">
    <!-- Page specific styles -->
    <link rel="stylesheet" href="{% static 'css/firewall/ufw.css' %}">

    <!-- Bootstrap JS for modals -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Header and Navigation Scripts -->
    <script defer src="{% static 'js/components/header.js' %}"></script>
    <!-- JavaScript Translations -->
    <script>
        window.jsTranslations = {
            'checking': '{% trans "Checking..." %}',
            'enabled': '{% trans "Enabled" %}',
            'disabled': '{% trans "Disabled" %}',
            'enable': '{% trans "Enable" %}',
            'disable': '{% trans "Disable" %}',
            'refresh': '{% trans "Refresh" %}',
            'back': '{% trans "Back" %}',
            'loading_rules': '{% trans "Loading rules..." %}',
            'no_rules_found': '{% trans "No Rules Found" %}',
            'no_firewall_rules_configured': '{% trans "No firewall rules are currently configured." %}',
            'firewall_rules': '{% trans "Firewall Rules" %}',
            'firewalld_firewall': '{% trans "firewalld Firewall" %}',
            'error_loading_status': '{% trans "Error loading firewalld status" %}',
            'error_loading_rules': '{% trans "Error loading firewalld rules" %}',
            'error_toggling_firewalld': '{% trans "Error toggling firewalld" %}',
            'firewalld_enabled_successfully': '{% trans "firewalld enabled successfully" %}',
            'firewalld_disabled_successfully': '{% trans "firewalld disabled successfully" %}',
            'firewalld_enable_failed': '{% trans "firewalld enable failed" %}',
            'firewalld_disable_failed': '{% trans "firewalld disable failed" %}',
            'not_available': '{% trans "Not Available" %}',
            'error': '{% trans "Error" %}'
        };
    </script>
    
    <!-- Page script -->
    <script defer src="{% static 'js/firewall/firewalld.js' %}"></script>
</head>
<body>
    {% csrf_token %}
    <div class="dashboard-container">
        {% include 'components/header.html' %}

        <main class="dashboard-main">
            <!-- firewalld Management -->
            <div class="ufw-management">
                <!-- Page Header -->
                <div class="ufw-header">
                    <div class="ufw-header-content">
                        <div class="ufw-title">
                            <h1>
                                <i class="fas fa-server"></i>
                                {% trans "firewalld Firewall" %}
                            </h1>
                            <div class="ufw-status" id="firewalldStatusIndicator">
                                <div class="status-dot"></div>
                                <span class="status-text">{% trans "Checking..." %}</span>
                            </div>
                        </div>
                        <div class="ufw-actions">
                            <button id="toggleFirewalld" class="btn-toggle">
                                <i class="fas fa-power-off"></i>
                                <span id="toggleText">{% trans "Enable" %}</span>
                            </button>
                            <button id="refreshFirewalld" class="btn-secondary">
                                <i class="fas fa-sync-alt"></i>
                                {% trans "Refresh" %}
                            </button>
                            <a href="{% url 'firewall:selection' %}" class="btn-secondary">
                                <i class="fas fa-arrow-left"></i>
                                {% trans "Back" %}
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Rules Section -->
                <div class="ufw-rules-section">
                    <div class="ufw-rules-header">
                        <h3>
                            <i class="fas fa-list"></i>
                            {% trans "Firewall Rules" %}
                            <span class="rules-count" id="rulesCount">(0)</span>
                        </h3>
                    </div>
                    
                    <!-- Loading State -->
                    <div class="rules-loading" id="firewalldRulesLoading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <span>{% trans "Loading rules..." %}</span>
                    </div>

                    <!-- Rules Container -->
                    <div id="firewalldRulesContainer" style="display: none;">
                        <!-- Rules will be organized by zone here -->
                    </div>

                    <!-- Empty State -->
                    <div class="rules-empty" id="firewalldRulesEmpty" style="display: none;">
                        <i class="fas fa-shield-alt"></i>
                        <h3>{% trans "No Rules Found" %}</h3>
                        <p>{% trans "No firewall rules are currently configured." %}</p>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>

